# üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–≤–µ–∑–¥–æ—á–∫–∏ –∏ –∑–∞–ª–∏–≤–∫–∏

## üéØ **–ü—Ä–æ–±–ª–µ–º–∞**

–¢–æ–≤–∞—Ä—ã (–ß–∞–π, –°–∞—Ö–∞—Ä, –°–æ–ª—å) –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞ –Ω–∞ –∑–≤–µ–∑–¥–æ—á–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –≤ –≥—Ä—É–ø–ø—É "–°—Ä–æ—á–Ω–æ", –Ω–æ:
- ‚ùå –ó–≤–µ–∑–¥–æ—á–∫–∞ –Ω–µ –º–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç/–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å  
- ‚ùå –ó–∞–ª–∏–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –∫—Ä–∞—Å–Ω—É—é

## üìã **–ü–ª–∞–Ω –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤**

### **–®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å—Ä–æ—á–Ω–æ—Å—Ç–∏**

–ù–∞–π–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏–∑ —Ç–æ–≤–∞—Ä–æ–≤:

```bash
# –ò—â–µ–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏ –¥–ª—è –°–∞—Ö–∞—Ä–∞
grep -A 10 -B 5 "TOGGLE URGENCY.*–°–∞—Ö–∞—Ä" logs/debug_v*.log
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[2025-11-05 22:35:42.100] MAIN_ACTIVITY: === TOGGLE URGENCY: –°–∞—Ö–∞—Ä ===
[2025-11-05 22:35:42.101] MAIN_ACTIVITY: BEFORE: urgent=false, buy=true
[2025-11-05 22:35:42.102] PRODUCT_MANAGER: === TOGGLE URGENCY: –°–∞—Ö–∞—Ä ===
[2025-11-05 22:35:42.103] PRODUCT_MANAGER: BEFORE: urgent=false, buy=true
[2025-11-05 22:35:42.104] PRODUCT_MANAGER: AFTER: urgent=true, buy=true
[2025-11-05 22:35:42.105] MAIN_ACTIVITY: AFTER: urgent=true, buy=true
```

### **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏**

```bash
# –ò—â–µ–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
grep -A 15 "–ù–ê–ß–ê–õ–û –ì–†–£–ü–ü–ò–†–û–í–ö–ò" logs/debug_v*.log
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[2025-11-05 22:35:42.200] GROUPED_LIST: === –ù–ê–ß–ê–õ–û –ì–†–£–ü–ü–ò–†–û–í–ö–ò ===
[2025-11-05 22:35:42.201] GROUPED_LIST: –í–°–ï –¢–û–í–ê–†–´: ..., –°–∞—Ö–∞—Ä(urgent=true,buy=true), ...
[2025-11-05 22:35:42.202] GROUPED_LIST: –ì–†–£–ü–ü–´ –ü–û–°–õ–ï –ì–†–£–ü–ü–ò–†–û–í–ö–ò:
[2025-11-05 22:35:42.203] GROUPED_LIST:   –°–†–û–ß–ù–û: [–°–∞—Ö–∞—Ä(urgent=true,buy=true), ...]
```

### **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–≤—è–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö**

```bash
# –ò—â–µ–º –ø—Ä–∏–≤—è–∑–∫—É –¥–ª—è –°–∞—Ö–∞—Ä–∞ –ø–æ—Å–ª–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
grep -A 10 -B 2 "BIND.*–°–∞—Ö–∞—Ä" logs/debug_v*.log
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[2025-11-05 22:35:42.300] PRODUCT_ADAPTER: === BIND: –°–∞—Ö–∞—Ä ===
[2025-11-05 22:35:42.301] PRODUCT_ADAPTER: isUrgent: true, needsToBuy: true
[2025-11-05 22:35:42.302] PRODUCT_ADAPTER: –£–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú: isUrgent=true, needsToBuy=true
[2025-11-05 22:35:42.303] PRODUCT_ADAPTER: –ó–í–ï–ó–î–û–ß–ö–ê: visibility=VISIBLE, alpha=1.0, src=btn_star_big_on
[2025-11-05 22:35:42.304] PRODUCT_ADAPTER: –§–û–ù: 2131689472 (urgent_background)
```

### **–®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ DiffUtil**

```bash
# –ò—â–µ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–ª—è –°–∞—Ö–∞—Ä–∞
grep -A 5 -B 2 "–°–∞—Ö–∞—Ä.*urgent" logs/debug_v*.log
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[2025-11-05 22:35:42.250] DIFF_UTIL: areContentsTheSame: "–°–∞—Ö–∞—Ä(urgent=false,buy=true)" == "–°–∞—Ö–∞—Ä(urgent=true,buy=true)"
[2025-11-05 22:35:42.251] DIFF_UTIL:   nameSame: true, needsToBuySame: true, isUrgentSame: false
[2025-11-05 22:35:42.252] DIFF_UTIL: areContentsTheSame RESULT: false
[2025-11-05 22:35:42.253] DIFF_UTIL: getChangePayload RESULT: urgency_changed
```

## üêõ **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã**

### **1. notifyDataSetChanged() –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
- **–ü—Ä–æ–±–ª–µ–º–∞:** `adapter.notifyDataSetChanged()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç ViewHolder
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `adapter.notifyItemChanged()` –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏

### **2. ViewHolder –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
- **–ü—Ä–æ–±–ª–µ–º–∞:** RecyclerView –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç ViewHolder —Å —Å—Ç–∞—Ä—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ `onBindViewHolder()`

### **3. DiffUtil –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**
- **–ü—Ä–æ–±–ª–µ–º–∞:** `getChangePayload()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤ DiffUtil

### **4. MIUI –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤**
- **–ü—Ä–æ–±–ª–µ–º–∞:** MIUI –∫—ç—à–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ View –∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è View

## üîß **–ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏**

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ê–Ω–∞–ª–∏–∑ –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞**
```bash
# –ü–æ–ª–Ω—ã–π –ª–æ–≥ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
grep -E "(TOGGLE URGENCY|BIND.*–°–∞—Ö–∞—Ä|UPDATE URGENCY.*–°–∞—Ö–∞—Ä)" logs/debug_v*.log
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π**
```bash
# –í—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
grep -E "2025-11-05 22:35:4[2-5]" logs/debug_v*.log | sort
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö**
```bash
# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep -i "error\|exception\|failed" logs/debug_v*.log
```

## üéØ **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ**

### **1. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ MainActivity**
```kotlin
private fun toggleProductUrgency(product: Product) {
    FileLogger.d("MAIN_ACTIVITY", "=== TOGGLE URGENCY: ${product.name} ===")
    FileLogger.d("MAIN_ACTIVITY", "BEFORE: urgent=${product.isUrgent}, buy=${product.needsToBuy}")
    
    // ... –∫–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è ...
    
    FileLogger.d("MAIN_ACTIVITY", "AFTER: urgent=${updatedProduct?.isUrgent}, buy=${updatedProduct?.needsToBuy}")
    
    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è MIUI
    runOnUiThread {
        adapter.notifyDataSetChanged()
        updateListAndSave()
    }
}
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ ProductManager**
```kotlin
fun toggleProductUrgency(name: String): Boolean {
    FileLogger.d("PRODUCT_MANAGER", "=== TOGGLE URGENCY: $name ===")
    
    // ... –∫–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è ...
    
    FileLogger.d("PRODUCT_MANAGER", "BEFORE: urgent=$oldUrgent, buy=$oldNeedsToBuy")
    FileLogger.d("PRODUCT_MANAGER", "AFTER: urgent=${product.isUrgent}, buy=${product.needsToBuy}")
}
```

### **3. –£—Å–∏–ª–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ MainActivity**
```kotlin
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ MIUI
runOnUiThread {
    adapter.notifyDataSetChanged()  // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö ViewHolder
    updateListAndSave()          // –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
}
```

## üìä **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```
[22:35:42.303] PRODUCT_ADAPTER: –ó–í–ï–ó–î–û–ß–ö–ê: visibility=VISIBLE, alpha=0.4, src=btn_star_big_off
[22:35:42.304] PRODUCT_ADAPTER: –§–û–ù: 2131689471 (product_item_background)
```

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```
[22:35:42.303] PRODUCT_ADAPTER: –ó–í–ï–ó–î–û–ß–ö–ê: visibility=VISIBLE, alpha=1.0, src=btn_star_big_on
[22:35:42.304] PRODUCT_ADAPTER: –§–û–ù: 2131689472 (urgent_background)
```

## üöÄ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º
2. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–≤–µ–∑–¥–æ—á–∫—É** —É —Ç–æ–≤–∞—Ä–∞ "–°–∞—Ö–∞—Ä"
3. **–°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏** –∏–∑ –ø–∞–ø–∫–∏ `logs/`
4. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ** –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ
5. **–°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –∞–Ω–∞–ª–∏–∑–∞

---

**üéØ –¶–µ–ª—å:** –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É, –ø–æ—á–µ–º—É –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–æ—á–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞.
